<!doctype html>
<html lang="esp">
  
  <head>
    <link rel="manifest" href="manifest.webmanifest">
    <meta charset="utf-8">
    <title>Casino</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
</head>
<body class = "bg-dark">

<header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <a class="navbar-brand" href="home.htm">
            <img src="https://www.onlinelogomaker.com/blog/wp-content/uploads/2017/10/casino-logo.jpg" width="70"
                height="45" class="d-inline-block align-center" alt="Imagen casino" loading="lazy">
            Casino
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="home.htm">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="ruleta.htm">Ruleta</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="dados.htm">Dados</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="moneda.htm">Cara o sello?</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="informacion.htm">Información de casino</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Cuenta
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="comprar.htm">Comprar créditos</a>
                    <a class="dropdown-item" href="historial.htm">Registro de apuestas</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="logout.htm">Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
</header>
    
	<body>
      <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
        <center>
            <h1 class="display-4">Ruleta</h1>
            <form method="POST">
              <div class="form-row">
                <div class="col-md-6 mb-3">
                  <label class ="text-light" for="validationTooltip01">Ingrese su apuesta</label>
                  <input name ="apuesta" id ="apuesta" type="number" min="0" max="36" class="form-control" placeholder="Elige un numero del 0 al 36" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class ="text-light" for="validationTooltip02">Monto de apuesta</label>
                  <input name ="dinero" id ="dinero" type="number" min="1" class="form-control" placeholder="1000" required>
                </div>
                <input name ="juego" id ="juego" type="hidden" value="Ruleta">
              </div>
              <button class="btn btn-primary col-md-6 mb-3" id="ruletaButton" type="submit" data-target="#resultado-apuesta">Apostar</button>
            </form>
            <div class="alert alert-success" role="alert" id='messageRuletaCorrecto' style='display:none;' ></div>
            <div class="alert alert-danger" role="alert" id='messageRuletaIncorrecto' style='display:none;' ></div>
            <div class="alert alert-warning" role="alert" id='messageRuletaNoValido' style='display:none;' ></div>

            <div id="ruleta-img-container">
            <div id="ruleta-indicador"></div>
              <img id="ruleta-img"  src="../img/Ruleta.png" width="330" alt="Ruleta" class="shadow-sm rounded-circle">
              
            </div>
        </center>
      </div>
      <div class="container">

        <footer class="pt-4 my-md-5 pt-md-5 border-top bg-dark">
          <div class="row">
              <div class="col-12 col-md">
                  <img class="mb-2"
                      src="https://www.onlinelogomaker.com/blog/wp-content/uploads/2017/10/casino-logo.jpg"
                      alt="Logo casino" width="80" height="50">
                  <small class="d-block mb-3 text-muted">&copy; 2020-2021</small>
              </div>
              <div class="col-6 col-md">
                  <h5>Menú</h5>
                  <ul class="list-unstyled text-small">
                      <li><a class="text-muted" href="ruleta.htm">Ruleta</a></li>
                      <li><a class="text-muted" href="dados.htm">Dados</a></li>
                      <li><a class="text-muted" href="moneda.htm">Cara o sello?</a></li>
                      <li><a class="text-muted" href="informacion.htm">Información Casino</a></li>
      
                  </ul>
              </div>
              <div class="col-6 col-md">
                  <h5>Acerca de nosotros</h5>
                  <ul class="list-unstyled text-small">
                      <li><a class="text-muted" href="#">Equipo</a></li>
                      <li><a class="text-muted" href="#">Ubicación</a></li>
                      <li><a class="text-muted" href="#">Contacto</a></li>
                      <li><a class="text-muted" href="#">Preguntas frecuentes</a></li>
                      <li><a class="text-muted" href="#">Privacidad</a></li>
                      <li><a class="text-muted" href="#">Términos y condiciones</a></li>
                  </ul>
              </div>
          </div>
      </footer>

      </div>   
      
<script>
$( "#ruletaButton" ).click(function() {
  function rotate(numero) {

    grados = [-6, 131, 296, 14, 315, 170, 257, 413, 559, 92, 180, 219, 33, 238, 112, 335, 
            151, 277, 72, 325, 122, 305, 82, 189, 160, 286, 4, 248, 43, 62, 209,
            102, 344, 140, 267, 24, 228]

    $("#ruleta-img").css({'transform': 'rotate('+parseInt(3600+grados[numero])+ 'deg)'});
  }
  localStorage.setItem('dinero', $("#dinero").val());
  localStorage.setItem('apuesta', $("#apuesta").val());
  localStorage.setItem('juego', $("#juego").val());

  $.post( "https://casinoxd.tk/api/v1.0.php/ruleta/", { 
      apuesta: localStorage.getItem('apuesta'), 
      dinero: localStorage.getItem('dinero'), 
      juego: localStorage.getItem('juego'),
      username: localStorage.getItem('username')
      }).done(function( data ) {
      console.log(data);
      if (data.resultado == 'ganar'){
        $(function() {  
          setTimeout(function() {
            $("#messageRuletaCorrecto").css({'display': 'block'});
            $("#messageRuletaCorrecto").html("Has ganado");
          }, 4000);
        });
      } else if(data.resultado == 'perder'){
        $(function() {  
          setTimeout(function() {
            $("#messageRuletaIncorrecto").css({'display': 'block'});
            $("#messageRuletaIncorrecto").html("Has perdido");
          }, 4000);
        });
      }else {
        $(function() {  
          setTimeout(function() {
            $("#messageRuletaNoValido").css({'display': 'block'});
            $("#messageRuletaNoValido").html("Apuesta no valida");
          }, 4000);
        });
      }
      rotate(data.number);
  });
});
      
        </script>
	</body>
</htm>
